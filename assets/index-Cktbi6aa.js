import{d as A,r as v,f as O,g as I,o as P,w as T,c as $,h as B,i as z,e as J,a as s,n as q,j as D,t as f,k as w,v as E,l as K,m as R}from"./index-C3vdtt9O.js";import{_ as L}from"./index.vue_vue_type_script_setup_true_lang-svy-u7Rt.js";import{J as M}from"./const-D6IH2YzA.js";import{g as G}from"./utils-D0PhfvxW.js";const U={class:"main-page"},Y={class:"font-size-4"},F={class:"text-center"},V="write-tablist",ee=A({__name:"index",setup(H){function _(){const e=[];for(const[,t]of Object.entries(M))e.push({question:t.hiragana,answer:t.romaji}),e.push({question:t.katakana,answer:t.romaji});return e}const k=[{name:"五十音",value:"tab1",remainingValues:[],obtainedValues:[],total:0,currentIndex:-1}],i=v("tab1"),n=O(k),a=I(()=>n.find(e=>e.value===i.value)),m=I(()=>a.value.obtainedValues[a.value.currentIndex]);function y(){const e=_();return{allValues:e,total:e.length}}function d(){var t,u,r;const e=n.findIndex(o=>o.value===i.value);if(!((t=a.value)!=null&&t.obtainedValues.length)&&!((u=a.value)!=null&&u.remainingValues.length)){const{allValues:o,total:c}=y();n[e]={...n[e],remainingValues:o,total:c}}if(a.value.currentIndex===((r=a.value)==null?void 0:r.total)-1){confetti();return}if(a.value.currentIndex===a.value.obtainedValues.length-1){if(!(!a.value.obtainedValues.length||h()))return;G(n[e]),g();return}n[e].currentIndex+=1,g()}function S(){const e=n.findIndex(t=>t.value===i.value);n[e]={...n[e],remainingValues:[],obtainedValues:[],total:0,currentIndex:-1},d()}const b=v(!1),p=v(!1);function C(){p.value=!0,b.value=!0,setTimeout(()=>{p.value=!1},1e3)}const x=v(!1),l=v("");function g(){x.value=!1,l.value=""}function h(){const{answer:e}=m.value,t=l.value&&e===l.value;return!t&&C(),t}function N(){h()&&d()}function j(){if(a.value.currentIndex<=0)return;const e=n.findIndex(t=>t.value===i.value);n[e].currentIndex-=1,g()}return P(()=>{const e=localStorage.getItem(V);if(!e){d();return}try{Object.assign(n,JSON.parse(e))}catch(t){console.log(t)}}),T(n,e=>{localStorage.setItem(V,JSON.stringify(e))}),(e,t)=>(J(),$("div",U,[B(L,{"tab-list":n,"model-active":i.value},{default:z(()=>{var u,r,o;return[s("div",null,[s("div",{class:q(["font-size-10 pb text-center relative",p.value?"apply-shake":""])},[D(f((u=m.value)==null?void 0:u.question)+" ",1),s("span",Y,f(x.value?(r=m.value)==null?void 0:r.answer:""),1),w(s("div",{class:"bubble text-center font-size-3"},f(l.value?`我不是${l.value}`:"猜猜看"),513),[[E,b.value]])],2),s("div",{class:"btn",onClick:t[0]||(t[0]=c=>x.value=!0)}," 答案 "),w(s("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>l.value=c),type:"text",onKeyup:R(N,["enter"]),onInput:t[2]||(t[2]=c=>b.value=!1)},null,544),[[K,l.value]]),s("div",{class:"flex justify-between"},[s("div",{class:"btn",onClick:j}," ◀︎ "),s("div",{class:"btn",onClick:d}," ▶︎ ")])]),s("div",null,[s("div",{class:"btn",onClick:S}," 重置 "),s("p",F,f(`${a.value.currentIndex+1}/${(o=a.value)==null?void 0:o.total}`),1)])]}),_:1},8,["tab-list","model-active"])]))}});export{ee as default};
