import{r as v,d as h,g as w,c as m,k as y,l as S,a as i,j as g,t as d,B as l,F,b as _,e as f}from"./index-C3vdtt9O.js";import{o as k}from"./const-D6IH2YzA.js";import{l as x}from"./utils-D0PhfvxW.js";function C(e,c){const t=v(null),s=v(""),o=localStorage.getItem(e);return o?(t.value=JSON.parse(o),s.value="来源缓存"):x(c).then(()=>{localStorage.setItem(e,JSON.stringify(window[e])),t.value=window[e],s.value="来源网络"}).catch(n=>{console.log(n)}),[t,s,async()=>{localStorage.removeItem(e),t.value=null,s.value="";try{await x(c),localStorage.setItem(e,JSON.stringify(window[e])),t.value=window[e],s.value="来源网络"}catch(n){console.log(n)}}]}const B={class:"px-2 flex flex-col justify-center"},D={class:"text-center mt-1 mb-4"},j="book",I="book",J=h({__name:"index",setup(e){const c=`${k}/${j}.js`,[t,s,o]=C(I,c),u=v(""),n=w(()=>{if(!t.value)return[];const p=u.value.toLowerCase();return t.value.filter(a=>a.title.toLowerCase().includes(p)||a.author.toLowerCase().includes(p))});return(p,a)=>(f(),m("div",B,[y(i("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>u.value=r),class:"input input-bordered input-primary w-full max-w-xs mx-auto",type:"text",placeholder:"搜索书名或作者..."},null,512),[[S,u.value]]),i("p",D,[g(" 图书总数: "+d(l(t)&&l(t).length)+" - ",1),i("span",{class:"text-xs",onClick:a[1]||(a[1]=(...r)=>l(o)&&l(o)(...r))},d(l(s)),1)]),i("ul",null,[(f(!0),m(F,null,_(n.value,r=>(f(),m("li",{key:r.title,class:"btn btn-sm btn-primary mb-2 flex justify-start"}," 《"+d(r.title)+"》 - "+d(r.author),1))),128))])]))}});export{J as default};
