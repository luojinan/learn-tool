import{d as L,r as m,g as U,o as S,c as r,j as V,t as i,a,k as _,l as x,x as b,F as j,b as B,u as F,e as u}from"./index-C3vdtt9O.js";import{u as N}from"./index-YRxaU1RN.js";import{a as I}from"./utils-D0PhfvxW.js";import{o as O}from"./const-D6IH2YzA.js";const R={class:"flex-col px-2"},T={class:"px-4"},E={class:"my-4 flex justify-center"},H={class:"flex place-content-evenly"},P=["onClick"],q={class:"my-1"},A={class:"text-gray-500 my-1 text-right text-sm"},G="https://mirror.ghproxy.com/https://raw.githubusercontent.com/",J="tomyangsh/news-backup/master",Z=L({__name:"index",setup(K){const k=F(),p=m(`${G}${J}`);function $(){const t=new Date;return t.setMonth(t.getMonth()-1),t.toISOString().slice(0,7)}const h=N("readgh-month",""),l=m(h.value||$()),o=m([]),f=m(""),g=U(()=>{var t;return(t=o.value[0])==null?void 0:t.size});async function y(){const t=`ghnew-${l.value}`,s=`${O}/${t}.js`,{data:e,msg:v}=await I(t,s);o.value=e.filter(({title:n})=>!n.includes("每日一语")).map(({title:n,size:z},D)=>{let d,c;return[d,c]=n.split("｜"),c||([d,c]=n.split("】"),d+="】"),{id:D,from:d,name:c&&c.replace(".md",""),title:n,size:+(z/1e3).toFixed(2)}}),f.value=v,h.value=l.value}function w(){const t=o.value.sort((s,e)=>e.size-s.size);o.value=t}function C(){const t=o.value.sort((s,e)=>s.id-e.id);o.value=t}S(()=>{y()});function M(t){const s=encodeURIComponent(`${p.value}/${l.value}/${t}`);k.push(`/readgh/detail?action=${s}`)}return(t,s)=>(u(),r("div",R,[V(i(f.value)+" ",1),a("div",T,[_(a("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>p.value=e),class:"w-full"},null,512),[[x,p.value]])]),a("div",E,[_(a("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>l.value=e),type:"month"},null,512),[[x,l.value]])]),a("div",H,[a("button",{class:"btn btn-primary",onClick:y}," 获取 "),g.value?(u(),r("button",{key:0,class:"btn btn-primary",onClick:w}," 排序 ")):b("",!0),g.value?(u(),r("button",{key:1,class:"btn btn-primary",onClick:C}," 还原 ")):b("",!0)]),(u(!0),r(j,null,B(o.value,(e,v)=>(u(),r("div",{key:e.id,class:"my-2 bg-gray-9 p-2",onClick:n=>M(e.title)},[a("p",q,i(v+1)+". "+i(e.name||"-"),1),a("p",A," ["+i(e.from||"-")+"] "+i(e.size||"-")+"kb ",1)],8,P))),128))]))}});export{Z as default};
